(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{8153:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return s(7810)}])},7810:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return W}});var n=s(5893),i=s(7294),t=s(9008),l=s.n(t),a=s(8005),c=s(7357),o=s(5582),d=s(6447),u=s(5861),h=s(3321),x=s(3219),j=s(657),Z=s(7645),p=s(6580),m=s(1425),S=s(8334);s(1567);var f=s(5121),g=s(2779);s(7474);var C=s(9396),v=s(6242),w=s(7709),y=s(7109),_=s(7906),E=s(3184),k=s(3816),P=s(8102),R=s(295),N=s(1589),A=s(2377);let L=[5,10,25,50,100,150,200,300],O=()=>{let[e,r]=(0,i.useState)(0),[s,t]=(0,i.useState)(10),[l,a]=(0,i.useState)([]),[c,o]=(0,i.useState)(""),[d,u]=(0,i.useState)([]),[S,O]=(0,i.useState)(!1),[b,W]=(0,i.useState)(null),[q,X]=(0,i.useState)(!1),[z,B]=(0,i.useState)(""),[G,I]=(0,i.useState)(!1),[T,F]=(0,i.useState)(!1),[K,J]=(0,i.useState)(null),[U,D]=(0,i.useState)(!1);(0,i.useEffect)(()=>{H()},[]);let H=async()=>{try{let e=await f.Z.get("".concat(g.uu.admin,"/get_all_users"));a(e.data),u(e.data),B("Requ\xeate r\xe9ussie !"),I(!0)}catch(e){console.error(e),B("Erreur lors de la requ\xeate."),I(!1)}finally{}},M=(e,s)=>{r(s)},Q=e=>{t(parseInt(e.target.value,10)),r(0)},V=e=>{let r=e.target.value;o(r);let s=l.filter(e=>!!e.name&&"string"==typeof e.name&&e.name.toLowerCase().includes(r.toLowerCase()));u(s)},Y=d.slice(e*s,(e+1)*s),$=e=>{W(e),O(!0)},ee=async()=>{if(b)try{let e=await f.Z.delete("".concat(g.uu.admin,"/delete_admin/").concat(b._id));200===e.status?(B("Suppression r\xe9ussie."),I(!0)):(B("Erreur lors de la suppression."),I(!1))}catch(e){console.error(e),B("Erreur lors de la suppression."),I(!1)}finally{X(!0),O(!1)}},er=()=>{O(!1)},es=()=>{X(!1)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(v.Z,{sx:{p:2},children:[(0,n.jsx)(w.Z,{fullWidth:!0,value:c,onChange:V,placeholder:"Rechercher Admin (Nom)",startAdornment:(0,n.jsx)(y.Z,{position:"start",children:(0,n.jsx)(x.Z,{color:"action",fontSize:"small",children:(0,n.jsx)(C.Z,{})})}),sx:{maxWidth:500,marginRight:2}}),(0,n.jsx)(h.Z,{variant:"contained",onClick:H,children:"Recherche"})]}),(0,n.jsx)(A.L,{children:(0,n.jsxs)(v.Z,{style:{overflowX:"auto"},children:[(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(E.Z,{children:(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(P.Z,{children:"Nom"}),(0,n.jsx)(P.Z,{children:"Email"}),(0,n.jsx)(P.Z,{children:"Bannie"}),(0,n.jsx)(P.Z,{children:"Supprimer"})]})}),(0,n.jsx)(R.Z,{children:Y.map(e=>(0,n.jsxs)(k.Z,{children:[(0,n.jsx)(P.Z,{children:e.name}),(0,n.jsx)(P.Z,{children:e.email}),(0,n.jsx)(P.Z,{children:(0,n.jsx)(h.Z,{variant:"contained",onClick:()=>$(e),color:"warning",children:"Bannie"})}),(0,n.jsx)(P.Z,{children:(0,n.jsx)(h.Z,{variant:"contained",onClick:()=>$(e),color:"error",children:"Supprimer"})})]},e._id))})]}),(0,n.jsx)(N.Z,{component:"div",count:d.length,page:e,onPageChange:M,rowsPerPage:s,onRowsPerPageChange:Q,rowsPerPageOptions:L})]})}),(0,n.jsxs)(j.Z,{open:S,onClose:er,children:[(0,n.jsx)(Z.Z,{children:"Confirmer la suppression"}),(0,n.jsx)(p.Z,{children:"\xcates-vous s\xfbr de vouloir supprimer cet administrateur ?"}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(h.Z,{onClick:er,color:"primary",children:"Annuler"}),(0,n.jsx)(h.Z,{onClick:ee,color:"error",children:"Supprimer"})]})]}),(0,n.jsxs)(j.Z,{open:q,onClose:es,children:[(0,n.jsx)(Z.Z,{children:G?"Succ\xe8s":"Erreur"}),(0,n.jsx)(p.Z,{children:z}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.Z,{onClick:es,color:"primary",children:"OK"})})]})]})},b=()=>{let[e,r]=(0,i.useState)({email:"",password:"",tel:"",role:""}),[s,t]=(0,i.useState)(!1),[S,f]=(0,i.useState)(""),[g,C]=(0,i.useState)(!1),v=()=>{t(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"Utilisateurs | Le Guide BJ"})}),(0,n.jsx)(c.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,n.jsx)(o.Z,{maxWidth:"xl",children:(0,n.jsxs)(d.Z,{spacing:3,children:[(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,n.jsx)(d.Z,{spacing:1,children:(0,n.jsx)(u.Z,{variant:"h4",children:"Gestion des utilisateurs"})}),(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,{startIcon:(0,n.jsx)(x.Z,{fontSize:"small",children:(0,n.jsx)(a.Z,{})}),variant:"contained",children:"Add"})})]}),(0,n.jsxs)(c.Z,{mt:4,children:[(0,n.jsx)(O,{}),(0,n.jsxs)(j.Z,{open:s,onClose:v,children:[(0,n.jsx)(Z.Z,{children:"R\xe9sultat"}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(u.Z,{color:g?"success":"error",children:S})}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.Z,{onClick:v,color:"primary",children:"Fermer"})})]})," "]})]})})})]})};b.getLayout=e=>(0,n.jsx)(S.A,{children:e});var W=b},7474:function(e,r,s){"use strict";var n=s(5893),i=s(7294),t=s(9396),l=s(6242),a=s(7709),c=s(7109),o=s(3219),d=s(3321),u=s(7906),h=s(3184),x=s(3816),j=s(8102),Z=s(295),p=s(1589),m=s(657),S=s(7645),f=s(6580),g=s(1425),C=s(5121),v=s(2779),w=s(2377);let y=[5,10,25,50,100,150,200,300],_=()=>{let[e,r]=(0,i.useState)(0),[s,_]=(0,i.useState)(10),[E,k]=(0,i.useState)([]),[P,R]=(0,i.useState)(""),[N,A]=(0,i.useState)([]),[L,O]=(0,i.useState)(!1),[b,W]=(0,i.useState)(null),[q,X]=(0,i.useState)(!1),[z,B]=(0,i.useState)(""),[G,I]=(0,i.useState)(!1),[T,F]=(0,i.useState)(!1),[K,J]=(0,i.useState)(null),[U,D]=(0,i.useState)(!1);(0,i.useEffect)(()=>{H()},[]);let H=async()=>{try{let e=await C.Z.get("".concat(v.uu.admin,"/retrieve_all_admin"));k(e.data),A(e.data),B("Requ\xeate r\xe9ussie !"),I(!0)}catch(e){console.error(e),B("Erreur lors de la requ\xeate."),I(!1)}finally{}},M=(e,s)=>{r(s)},Q=e=>{_(parseInt(e.target.value,10)),r(0)},V=e=>{let r=e.target.value;R(r);let s=E.filter(e=>!!e.name&&"string"==typeof e.name&&e.name.toLowerCase().includes(r.toLowerCase()));A(s)},Y=N.slice(e*s,(e+1)*s),$=e=>{W(e),O(!0)},ee=async()=>{if(b)try{let e=await C.Z.delete("".concat(v.uu.admin,"/delete_admin/").concat(b._id));200===e.status?(B("Suppression r\xe9ussie."),I(!0)):(B("Erreur lors de la suppression."),I(!1))}catch(e){console.error(e),B("Erreur lors de la suppression."),I(!1)}finally{X(!0),O(!1)}},er=()=>{O(!1)},es=()=>{X(!1)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Z,{sx:{p:2},children:[(0,n.jsx)(a.Z,{fullWidth:!0,value:P,onChange:V,placeholder:"Rechercher Admin (Nom)",startAdornment:(0,n.jsx)(c.Z,{position:"start",children:(0,n.jsx)(o.Z,{color:"action",fontSize:"small",children:(0,n.jsx)(t.Z,{})})}),sx:{maxWidth:500,marginRight:2}}),(0,n.jsx)(d.Z,{variant:"contained",onClick:H,children:"Recherche"})]}),(0,n.jsx)(w.L,{children:(0,n.jsxs)(l.Z,{style:{overflowX:"auto"},children:[(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(h.Z,{children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(j.Z,{children:"Nom"}),(0,n.jsx)(j.Z,{children:"Email"}),(0,n.jsx)(j.Z,{children:"Tel"}),(0,n.jsx)(j.Z,{children:"Role"}),(0,n.jsx)(j.Z,{children:"Supprimer"})]})}),(0,n.jsx)(Z.Z,{children:Y.map(e=>(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(j.Z,{children:e.name}),(0,n.jsx)(j.Z,{children:e.email}),(0,n.jsx)(j.Z,{children:e.tel}),(0,n.jsx)(j.Z,{children:e.role}),(0,n.jsx)(j.Z,{children:(0,n.jsx)(d.Z,{variant:"contained",onClick:()=>$(e),color:"error",children:"Supprimer"})})]},e._id))})]}),(0,n.jsx)(p.Z,{component:"div",count:N.length,page:e,onPageChange:M,rowsPerPage:s,onRowsPerPageChange:Q,rowsPerPageOptions:y})]})}),(0,n.jsxs)(m.Z,{open:L,onClose:er,children:[(0,n.jsx)(S.Z,{children:"Confirmer la suppression"}),(0,n.jsx)(f.Z,{children:"\xcates-vous s\xfbr de vouloir supprimer cet administrateur ?"}),(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(d.Z,{onClick:er,color:"primary",children:"Annuler"}),(0,n.jsx)(d.Z,{onClick:ee,color:"error",children:"Supprimer"})]})]}),(0,n.jsxs)(m.Z,{open:q,onClose:es,children:[(0,n.jsx)(S.Z,{children:G?"Succ\xe8s":"Erreur"}),(0,n.jsx)(f.Z,{children:z}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(d.Z,{onClick:es,color:"primary",children:"OK"})})]})]})};r.Z=_},1567:function(e,r,s){"use strict";s(5893)}},function(e){e.O(0,[497,255,156,225,703,483,334,774,888,179],function(){return e(e.s=8153)}),_N_E=e.O()}]);